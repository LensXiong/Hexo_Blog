<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/hexo_blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/hexo_blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/hexo_blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/hexo_blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/hexo_blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/hexo_blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/hexo_blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Redis," />










<meta name="description" content="摘要：Redis (Remote Dictionary Server) 是一个开源的、基于内存的数据结构存储器，可以被用作数据库、缓存和消息代理。如果你是一名NoSQL的拥护者，你一定会提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，无疑是一种全新思维的注入。所以，你完全可以将Redis融入到你的系统中，它能帮你解决很多问题，比如那些你现有的数据库处理起来感到缓慢的任务，你可以通过R">
<meta name="keywords" content="Redis">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis 学习笔记 (上)">
<meta property="og:url" content="http://wwxiong.com/hexo_blog/2016/12/08/2016/2016-12-09-redis-1/index.html">
<meta property="og:site_name" content="Wangxiong&#39;s Notes">
<meta property="og:description" content="摘要：Redis (Remote Dictionary Server) 是一个开源的、基于内存的数据结构存储器，可以被用作数据库、缓存和消息代理。如果你是一名NoSQL的拥护者，你一定会提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，无疑是一种全新思维的注入。所以，你完全可以将Redis融入到你的系统中，它能帮你解决很多问题，比如那些你现有的数据库处理起来感到缓慢的任务，你可以通过R">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-09-22T12:10:24.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Redis 学习笔记 (上)">
<meta name="twitter:description" content="摘要：Redis (Remote Dictionary Server) 是一个开源的、基于内存的数据结构存储器，可以被用作数据库、缓存和消息代理。如果你是一名NoSQL的拥护者，你一定会提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，无疑是一种全新思维的注入。所以，你完全可以将Redis融入到你的系统中，它能帮你解决很多问题，比如那些你现有的数据库处理起来感到缓慢的任务，你可以通过R">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/hexo_blog/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"right","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'PTDAI8CAYI',
      apiKey: '0ee8d8726142fd3ffede4bc9f6a038b4',
      indexName: 'lensxiong',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://wwxiong.com/hexo_blog/2016/12/08/2016/2016-12-09-redis-1/"/>





  <title>Redis 学习笔记 (上) | Wangxiong's Notes</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?409134d3cf8c219e63f0cb0c78947ea7";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/hexo_blog/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Wangxiong's Notes</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">始于技术，岂止于技术。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/hexo_blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/hexo_blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://wwxiong.com/hexo_blog/hexo_blog/2016/12/08/2016/2016-12-09-redis-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Wang Xiong">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/hexo_blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Wangxiong's Notes">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Redis 学习笔记 (上)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-08T23:32:24+08:00">
                2016-12-08
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/hexo_blog/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>摘要：Redis (Remote Dictionary Server) 是一个开源的、基于内存的数据结构存储器，可以被用作数据库、缓存和消息代理。如果你是一名NoSQL的拥护者，你一定会提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，无疑是一种全新思维的注入。所以，你完全可以将Redis融入到你的系统中，它能帮你解决很多问题，比如那些你现有的数据库处理起来感到缓慢的任务，你可以通过Redis来进行优化，或者为应用创建些新的功能。在本文中，先从认识Redis开始，一步步编译和安装，再对基本的五种数据类型进行操作，了解Redis的持久化功能和主从配置，最终能使用PHP脚本语言操作Redis。<br><a id="more"></a></p>
<the rest="" of="" contents="" |="" 余下全文="">

<h1 id="关于Redis"><a href="#关于Redis" class="headerlink" title="关于Redis"></a>关于Redis</h1><p>Redis是一个开源的、基于内存的数据结构存储器，可以被用作数据库、缓存和消息代理。</p>
<p>相较Memcached而言，支持更加丰富的数据结构，包括字符串、哈希、列表、集合、有序集合等，此外还支持将数据持久化到数据库。</p>
<p>MySQL数据库的数据是以文件形式保存在硬盘里边。</p>
<p>Redis也是数据库服务器(但是其不可以保存复杂的信息，其特点是数据较简单，但是速度快)软件，数据是在内存里边保存。</p>
<h1 id="为什么要使用Redis"><a href="#为什么要使用Redis" class="headerlink" title="为什么要使用Redis"></a>为什么要使用Redis</h1><p>有的时候一个网站页面的数据在相对一段时间(半天、一天)不发生变化，同时该页面每天还要被许多人访问。</p>
<p>我们把该页面从MySQL里边获得数据放到内存里边，这样既节省MySQL数据库资源、间接还节省服务器资源，同时还会使得网站访问速度加快，提升用户体验。</p>
<p>以下是使用Redis的原因：</p>
<p>① 是一款数据库产品，有数据存储功能<br>② 高速读取数据(in-memory)<br>③ 减轻数据库负担，大量节省数据库资源<br>④ 有集合计算功能(优于普通数据库和同类别产品)<br>⑤ 多种数据结构支持</p>
<h1 id="什么是Redis"><a href="#什么是Redis" class="headerlink" title="什么是Redis"></a>什么是Redis</h1><p>Remote  dictionary  server  (远程数据字典服务)</p>
<p>该软件时意大利人(Antirez)开发的，使用C语言开发的一款内存高速数据库服务软件。</p>
<p>该软件内部有各种非常使用的数据类型：string    set(集合)   sort set(排序集合)   list(列表)   hash(哈希) bitmaps(位图)  hyperloglogs(基数统计)</p>
<p>该软件有本地持久化功能，可以把随时的变化的数据都在硬盘备份一份。防止数据丢失</p>
<h1 id="同类型产品Memcache"><a href="#同类型产品Memcache" class="headerlink" title="同类型产品Memcache"></a>同类型产品Memcache</h1><p>memory cache  内存缓存</p>
<p>Redis与Memcache比较：</p>
<p>① Redis不仅仅支持简单的k/v类型的数据，同时还提供list，set，zset，hash，bitmaps， hyperloglogs 等数据结构的存储。<br>② Redis支持数据的备份，即master-slave(主—从)模式的数据备份。<br>③ Redis支持数据的持久化，可以将内存中的数据保持在磁盘中，重启的时候可以再次加载进行使用。<br>④ Redis单个value的最大限制是1GB， Memcached只能保存1MB的数据</p>
<h1 id="什么场合使用Redis"><a href="#什么场合使用Redis" class="headerlink" title="什么场合使用Redis"></a>什么场合使用Redis</h1><p>① [Sort Set]排行榜应用，取top n操作，例如sina微博热门话题<br>② [List]获得最新N个数据 或 某个分类的最新数据<br>③ [Set]sns(social network site)获得共同好友<br>④ [Set]防攻击系统(ip判断)等等<br>⑤ Pub/Sub构建实时消息系统，比如很多用Pub/Sub构建的实时聊天系统的例子</p>
<h1 id="编译和安装Redis"><a href="#编译和安装Redis" class="headerlink" title="编译和安装Redis"></a>编译和安装Redis</h1><p>进入下载目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span></span><br></pre></td></tr></table></figure></p>
<p>下载redis<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="regexp">//</span>download.redis.io<span class="regexp">/releases/</span>redis-<span class="number">3.0</span>.<span class="number">5</span>.tar.gz</span><br></pre></td></tr></table></figure></p>
<p>解压缩<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">redis-3</span><span class="selector-class">.0</span><span class="selector-class">.5</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure></p>
<p>进入安装目录<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd redis<span class="number">-3.0</span><span class="number">.5</span>/src</span><br></pre></td></tr></table></figure></p>
<p>查看cpu型号<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">uname -m</span></span><br></pre></td></tr></table></figure></p>
<p>编译安装<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">make CFLAGS</span>=”-march=i686”;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>说明：make 后面一串代码: CFLAGS=”-march=i686” 是防止软件版本与Linux硬件不适配的。Linux有i386和i686这种区别；在redis软件与硬件不适配的情况下直接使用make命令编译，会报错误。</p>
</blockquote>
<p>创建一个工作目录<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> /usr/<span class="built_in">local</span>/redis</span><br></pre></td></tr></table></figure></p>
<p>将编译安装后的三个文件复制到工作目录下<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp redis-<span class="keyword">cli</span> redis-server ../redis.<span class="keyword">conf</span> /usr/<span class="keyword">local</span>/redis</span><br></pre></td></tr></table></figure></p>
<p>最终结果是，redis目录下有了三个文件<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">redis-<span class="keyword">cli</span>     <span class="comment">// 客户端指令文件</span></span><br><span class="line">redis-server  <span class="comment">// 服务指令文件</span></span><br><span class="line">redis.<span class="keyword">conf</span>    <span class="comment">// 配置文件</span></span><br></pre></td></tr></table></figure></p>
<p>修改配置文件redis.conf，配置redis作为守护进程运行<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim</span> redis.conf</span><br><span class="line">daemonize <span class="literal">yes</span></span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>默认情况下redis不是作为守护进程运行的，如果想让它在后台运行，需要把配置文件里daemonize改成 yes。</p>
</blockquote>
<p>启动redis服务<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./redis-server <span class="meta">&amp;</span></span><br></pre></td></tr></table></figure></p>
<p>如果修改过配置文件后<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./redis-<span class="keyword">server</span> redis.conf</span><br></pre></td></tr></table></figure></p>
<p>杀掉rdis进程，然后再次打开redis服务<br><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">killall redis-<span class="keyword">server</span></span><br><span class="line">./redis-<span class="keyword">server</span> redis.conf</span><br></pre></td></tr></table></figure></p>
<p>查看进程里面有没有redis服务，可以用pstree命令查看进程:<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">pstree</span></span><br></pre></td></tr></table></figure></p>
<p>查看对应的服务进程<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -A | <span class="keyword">grep</span> redis</span><br></pre></td></tr></table></figure></p>
<p>检测客户端检测连接是否正常<br><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./redis-<span class="keyword">cli</span></span><br></pre></td></tr></table></figure></p>
<h1 id="src目录下相关文件"><a href="#src目录下相关文件" class="headerlink" title="src目录下相关文件"></a>src目录下相关文件</h1><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 压力测试</span></span><br><span class="line">redis-benchmark</span><br><span class="line"><span class="comment">// 检查redis持久化命令文件的完整性</span></span><br><span class="line">redis-check-aof</span><br><span class="line"><span class="comment">// 检查redis持久化数据文件的完整性</span></span><br><span class="line">redis-check-dump</span><br><span class="line"><span class="comment">// redis在linux上的客户端</span></span><br><span class="line">redis-cli</span><br><span class="line"><span class="comment">// 做集群用的</span></span><br><span class="line">redis-sentinel</span><br><span class="line"><span class="comment">// linux上的服务端</span></span><br><span class="line">redis-<span class="keyword">server</span></span><br></pre></td></tr></table></figure>
<h1 id="编译安装PHPRedis"><a href="#编译安装PHPRedis" class="headerlink" title="编译安装PHPRedis"></a>编译安装PHPRedis</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">解压 phpredis<span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">在解压目录执行 /usr/local/php/bin/phpize</span><br><span class="line">安装 autoconf-<span class="number">2.6</span>.<span class="number">2</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">配置编译phpredis</span><br><span class="line">./configure --with-php-config=/usr/local/php/bin/php-config</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">在php.ini配置文件中引入redis</span><br></pre></td></tr></table></figure>
<h1 id="keys键的操作"><a href="#keys键的操作" class="headerlink" title="keys键的操作"></a>keys键的操作</h1><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取所有的key</span></span><br><span class="line"><span class="built_in">keys</span> *</span><br><span class="line"><span class="comment">// 测试指定的key是否存在</span></span><br><span class="line">exists <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 删除给定的key</span></span><br><span class="line">del key1 key2 key3 ....keyN</span><br><span class="line"><span class="comment">// 返回给定key的value类型</span></span><br><span class="line"><span class="built_in">type</span> <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 返回匹配指定模式的所有key</span></span><br><span class="line"><span class="built_in">keys</span> pattern</span><br><span class="line"><span class="comment">// 返回从当前数据库中随机选取的一个key</span></span><br><span class="line">randomkey</span><br><span class="line"><span class="comment">// 改名字</span></span><br><span class="line">rename oldkey newkey</span><br><span class="line"><span class="comment">// 返回当前数据库的key数量</span></span><br><span class="line">dbsize</span><br><span class="line"><span class="comment">// 为key指定过期时间</span></span><br><span class="line">expire <span class="built_in">key</span> seconds</span><br><span class="line"><span class="comment">// 返回key的剩余过期秒数</span></span><br><span class="line">tt1 <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 选择数据库</span></span><br><span class="line"><span class="keyword">select</span> db-index</span><br><span class="line"><span class="comment">// 将key从当前数据库移动到指定数据库</span></span><br><span class="line">move <span class="built_in">key</span> db-index</span><br><span class="line"><span class="comment">// 删除当前数据库中所有key</span></span><br><span class="line">flushdb</span><br><span class="line"><span class="comment">// 删除所有数据库中的所有key</span></span><br><span class="line">flushall</span><br></pre></td></tr></table></figure>
<h1 id="string类型操作"><a href="#string类型操作" class="headerlink" title="string类型操作"></a>string类型操作</h1><p>string是redis最基本的类型，而且string类型是二进制安全的。</p>
<p>redis的string可以包含任何数据。包括jpg图片或者序列化的对象。</p>
<p>单个value值最大上限是1G字节。</p>
<p>如果只用string类型，redis就可以被看作加上持久化特性的memcached。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 设置key对应的值为 string 类型的value</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">key</span> <span class="keyword">value</span></span><br><span class="line">// 一次设置多个<span class="keyword">key</span>的值</span><br><span class="line">mset key1 value1 ... keyN valueN</span><br><span class="line">// 一次获取多个<span class="keyword">key</span>的值</span><br><span class="line">mget key1 key2 ... keyN</span><br><span class="line">// 对<span class="keyword">key</span>的值做加加操作，并返回新的值</span><br><span class="line">incr <span class="keyword">key</span></span><br><span class="line">// 减减操作</span><br><span class="line">decr <span class="keyword">key</span></span><br><span class="line">// 加指定值</span><br><span class="line">incrby <span class="keyword">key</span> <span class="built_in">integer</span></span><br><span class="line">// 减指定值</span><br><span class="line">decrby <span class="keyword">key</span> <span class="built_in">integer</span></span><br><span class="line">// 给指定<span class="keyword">key</span>的字符串追加<span class="keyword">value</span></span><br><span class="line">append <span class="keyword">key</span> <span class="keyword">value</span></span><br><span class="line">// 返回截取过的<span class="keyword">key</span>的字符串值</span><br><span class="line"><span class="keyword">substr</span> <span class="keyword">key</span> <span class="keyword">start</span> <span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h1 id="list数据类型"><a href="#list数据类型" class="headerlink" title="list数据类型"></a>list数据类型</h1><p>list类型其实就是一个双向链表。</p>
<p>通过push,pop操作从链表的头部或者尾部添加删除元素。</p>
<p>这使得list既可以用作栈，也可以用作队列。<br><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">// 在key对应<span class="keyword">list</span>的头部添加字符串元素</span><br><span class="line">lpush key <span class="keyword">string</span></span><br><span class="line">//  在尾部添加字符串元素</span><br><span class="line">rpush key <span class="keyword">string</span></span><br><span class="line">// 返回key对应<span class="keyword">list</span>的长度，key不存在返回<span class="number">0</span></span><br><span class="line">llen key</span><br><span class="line">// 返回指定区间内的元素 下标从<span class="number">0</span>开始</span><br><span class="line"><span class="keyword">lrange</span> key start end</span><br><span class="line">// 截取<span class="keyword">list</span>，保留指定区间内元素</span><br><span class="line">ltrim key start end</span><br><span class="line">// 设置<span class="keyword">list</span>中指定下标的元素值</span><br><span class="line"><span class="keyword">lset</span> key index value</span><br><span class="line">// 从key对应<span class="keyword">list</span>中删除count个和value相同的元素，count为<span class="number">0</span>的时候删除全部</span><br><span class="line">lrem key count value</span><br><span class="line">// 从<span class="keyword">list</span>的头部删除元素，并返回删除元素</span><br><span class="line">lpop key</span><br><span class="line">// 从<span class="keyword">list</span>的尾部删除元素，并返回删除元素</span><br><span class="line">rpop key</span><br></pre></td></tr></table></figure></p>
<h1 id="sort-set排序数据类型"><a href="#sort-set排序数据类型" class="headerlink" title="sort set排序数据类型"></a>sort set排序数据类型</h1><p>redis的set是string类型的无序集合。</p>
<p>set元素最大可以包含(2的32次方-1)个元素。</p>
<p>关于set集合类型除了基本的添加删除操作，其他有用的操作还包含集合的取并集(union)，交集(intersection)，差集(difference)。</p>
<p>通过这些操作可以很容易的实现sns中的好友推荐功能。<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 添加元素到集合，元素在集合中存在则更新对应score</span></span><br><span class="line">zadd <span class="built_in">key</span> score member</span><br><span class="line"><span class="comment">// 删除指定元素 1表示成功 0表示元素不存在</span></span><br><span class="line">zrem <span class="built_in">key</span> member</span><br><span class="line"><span class="comment">// 按照incr幅度增加对应member的score值</span></span><br><span class="line">zincrby <span class="built_in">key</span> incr member</span><br><span class="line"><span class="comment">// 返回指定元素在集合中的排名（下标）</span></span><br><span class="line">zrank <span class="built_in">key</span> member</span><br><span class="line"><span class="comment">// 集合中的元素按score从大到小排序</span></span><br><span class="line">zrevrank <span class="built_in">key</span> start end</span><br><span class="line"><span class="comment">// 类似lrange操作从集合中去除指定区间的元素 正序 从小到大</span></span><br><span class="line">zrange <span class="built_in">key</span> start end</span><br><span class="line"><span class="comment">// 返回的结果按score逆序的 从大到小</span></span><br><span class="line">zrevrange <span class="built_in">key</span> start end</span><br><span class="line"><span class="comment">// 返回集合中的score在给定区间的元素</span></span><br><span class="line">zrangebyscore <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br><span class="line"><span class="comment">// 返回集合中score在给定区间的数量</span></span><br><span class="line">zcount <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br><span class="line"><span class="comment">// 返回集合中元素的个数</span></span><br><span class="line">zcard <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 返回给定元素对应的score</span></span><br><span class="line">zscore <span class="built_in">key</span> elemenr</span><br><span class="line"><span class="comment">// 删除集合中排名在给定区间的元素</span></span><br><span class="line">zremrangebyrank <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br><span class="line"><span class="comment">// 删除集合中score在给定区间的元素</span></span><br><span class="line">zremrangebyscore <span class="built_in">key</span> <span class="built_in">min</span> <span class="built_in">max</span></span><br></pre></td></tr></table></figure></p>
<h1 id="hash数据类型"><a href="#hash数据类型" class="headerlink" title="hash数据类型"></a>hash数据类型</h1><p>hash数据类型存储的数据与mysql数据库中存储的一条记录极为相似。</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置hash field 为指定值，如果key不存在则创建</span></span><br><span class="line">hset <span class="built_in">key</span> field <span class="built_in">value</span></span><br><span class="line"><span class="comment">// 获取指定的 hash field</span></span><br><span class="line">hget <span class="built_in">key</span> field</span><br><span class="line"><span class="comment">// 获取全部指定的hash field</span></span><br><span class="line">hmget <span class="built_in">key</span> field1 ...fieldN</span><br><span class="line"><span class="comment">// 同时设置hash的多个field</span></span><br><span class="line">hmset <span class="built_in">key</span> field1 value1</span><br><span class="line"><span class="comment">// 将指定的hash field 加上给定值</span></span><br><span class="line">hincrby <span class="built_in">key</span> field integer</span><br><span class="line"><span class="comment">// 测试指定 field 是否存在</span></span><br><span class="line">hexists <span class="built_in">key</span> field</span><br><span class="line"><span class="comment">// 删除指定的 hash field</span></span><br><span class="line"><span class="built_in">hdel</span> <span class="built_in">key</span> field</span><br><span class="line"><span class="comment">// 返回指定hash的field</span></span><br><span class="line">hlen <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 返回hash的所有field</span></span><br><span class="line">hkeys <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 返回hash的所有value</span></span><br><span class="line">hvals <span class="built_in">key</span></span><br><span class="line"><span class="comment">// 返回hash的所有field和value</span></span><br><span class="line">hgetall <span class="built_in">key</span></span><br></pre></td></tr></table></figure>
<h1 id="redis持久化"><a href="#redis持久化" class="headerlink" title="redis持久化"></a>redis持久化</h1><ul>
<li>redis较比其他同类型产品有个最大的好处可以进行持久化操作。</li>
<li>其会根据不同条件的触发，随时把当前内存存储的数据以文件形式保存在硬盘里边，这样服务器断电、或重启系统服务器，数据还会从硬盘里边恢复到内存里。</li>
</ul>
<p>① snapshotting 快照方式持久化（默认文件名dump.rdb）<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">该方式持久化保存内存数据不能太频繁</span><br><span class="line">该方式是一次性把全部redis的内存数据都保存在硬盘里边，如果数据非常多(例如<span class="number">10</span><span class="number">-20</span>G大小)每备份一次消耗的时间非常多。</span><br><span class="line">触发条件：（组合方式）</span><br><span class="line">save <span class="number">900</span> <span class="number">1</span> <span class="comment">//900秒内如果超过1个key被修改，则发起快照保存</span></span><br><span class="line">save <span class="number">300</span> <span class="number">10</span> <span class="comment">//300秒内超过一个key被修改，发起快照</span></span><br><span class="line">save <span class="number">60</span> <span class="number">10000</span>  <span class="comment">//60秒内超过10000个key被改变，发起快照</span></span><br><span class="line">手动发起快照：</span><br><span class="line">./redis-cli bgsave</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">snapshotting快照方式持久化的密度非常大，必须触发指定的条件才会执行该方式快照。</span><br><span class="line">快照方式每次持久化都非常消耗时间，不适合频繁使用。</span><br><span class="line">再者快照方式持久化密度大，服务器突然断电会出现数据丢失的情况。</span><br></pre></td></tr></table></figure>
<p>②  append-only-file 追加方式持久化（AOF）<br>AOF持久化又称为“增量”方式持久化。<br>可以使得快照 和 AOF结合对数据进行备份<br>① 快照在每月1号发起一次<br>②AOF是每秒都发起，是对快照方式的补充<br> AOF保存的数据是从当前时间点开始变化的数据<br>如果数据需要恢复，则从两个文件恢复数据：快照备份文件 +  AOF备份文件<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">appendonly yes	启用 aof 持久化方式</span><br><span class="line">appendfilename appendonly.aof   保存命令的文件</span><br><span class="line">appendfsync always   每次收到写命令就立即强制写入磁盘，最慢的，但是保证完全的持久化，不推荐使用</span><br><span class="line">appendfsync everysec 每秒钟强制写入磁盘一次，在性能和持久化方面做了很好的折中，推荐</span><br><span class="line">appendfsync no  完全依赖 os，性能最好,持久化没保证</span><br><span class="line">save 同步保存数据到磁盘</span><br><span class="line">bgsave 异步保存数据到磁盘</span><br><span class="line">lastsave 返回上次成功保存到磁盘的unix时间戳</span><br><span class="line">shutdown  同步保存到服务器并关闭redis服务器</span><br><span class="line">bgrewriteaof  当日志文件过长时优化日志文件存储</span><br><span class="line">./redis-cli -h <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> -p <span class="number">6379</span> bgsave   手动发起快照</span><br></pre></td></tr></table></figure></p>
<h1 id="redis的主从配置"><a href="#redis的主从配置" class="headerlink" title="redis的主从配置"></a>redis的主从配置</h1><ul>
<li>mysql有读写分离技术，有的mysql专门做数据写入(添加、update、删除)操作，有的mysql专门做数据读取操作。</li>
<li>服务器如果负载较高，也需要做主从(分离)配置<br>有的服务器安装apache+php<br>有的服务器安装mysql<br>有的服务器专门处理图片请求<br>有的服务器专门处理音乐、视频请求。</li>
<li>redis如果负载较高也做主从配置<br>有的服务器专门做数据写入操作<br>有的服务器专门做数据读取操作<br>主从复制的特点：<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">master</span>可以由多个<span class="literal">slave</span></span><br><span class="line">除了多个<span class="literal">slave</span>连接到<span class="literal">master</span>外，<span class="literal">slave</span>也可以连接到其他<span class="literal">slave</span>，形成网状结构</span><br><span class="line"><span class="literal">master</span>与<span class="literal">slave</span>初次同步数据时不会阻塞，<span class="literal">slave</span>与<span class="literal">master</span>初次同步数据同时会阻塞不能处理client请求</span><br><span class="line">可以让<span class="literal">slave</span>做读请求，<span class="literal">master</span>做写操作</span><br><span class="line">可以在<span class="literal">master</span>中注释掉配置文件中的save指令达到禁用持久化操作，然后只让<span class="literal">slave</span>做持久化</span><br><span class="line">save  <span class="number">10000000000</span>   <span class="number">10000000000</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>主从服务器设置：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/redis.conf</span></span><br><span class="line">daemonize <span class="literal">yes</span></span><br><span class="line">port 6379</span><br><span class="line">requirepass 123456 #主服务器连接密码</span><br><span class="line"><span class="comment"># vim /etc/redis.conf</span></span><br><span class="line">daemonize <span class="literal">yes</span></span><br><span class="line">port 6300</span><br><span class="line">slaveof 192.168.1.100 6379</span><br><span class="line">masterauth 123456 #从服务器连接密码</span><br></pre></td></tr></table></figure></p>
<h1 id="php操作redis"><a href="#php操作redis" class="headerlink" title="php操作redis"></a>php操作redis</h1><p>创建redis扩展文件：<br>① 下载phpredis扩展包<br>上传至linux指定目录（/home/wangxiong/rdtar）<br>② 进入phpredis源码目录并执行php的bin目录下的phpize工具<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">shell</span><span class="bash"><span class="comment"># cd /home/wangxiong/tar</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># tar zxvf phpredis.tar.gz</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># cd phpredis</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># /usr/local/php/bin/phpize   ????</span></span></span><br><span class="line"><span class="bash">以上这个指令必须在phpredis解压包目录/home/wangxiong/tar/phpredis(根据个人情况设置)执行</span></span><br></pre></td></tr></table></figure></p>
<p>③ 安装autoconf-2.62.tar.gz<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">shell</span><span class="bash"><span class="comment"># cd /home/wagxiong/tar</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># tar zxvf autoconf-2.62.tar.gz</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># cd autoconf-2.62</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># ./configure &amp;&amp; make &amp;&amp; make install</span></span></span><br></pre></td></tr></table></figure></p>
<p>④ 配置并编译安装phpredis<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">shell</span><span class="bash"><span class="comment">#./configure --with-php-config=/usr/local/php/bin/php-config</span></span></span><br><span class="line"><span class="bash">shell<span class="comment"># make &amp;&amp; make install</span></span></span><br></pre></td></tr></table></figure></p>
<p>⑤ 给php.ini设置redis扩展<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">shell</span><span class="bash"><span class="comment"># vi /usr/local/php/lib/php.ini</span></span></span><br><span class="line"><span class="bash">[redis]</span></span><br><span class="line"><span class="bash">extension=redis.so</span></span><br></pre></td></tr></table></figure></p>
<p>⑥ 重启apache，查看php是否有引入redis扩展<br><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">shell</span><span class="bash"><span class="comment"># /usr/local/http2/bin/apachectl restart</span></span></span><br></pre></td></tr></table></figure></p>
<p>⑦ php使用redis示例代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">$redis = <span class="keyword">new</span> Redis();</span></span><br><span class="line"><span class="php">$redis-&gt;connect(<span class="string">'localhost'</span>,<span class="string">'6379'</span>);</span></span><br><span class="line"><span class="php">$redis-&gt;set(<span class="string">'address'</span>,<span class="string">'beijing'</span>);</span></span><br><span class="line"><span class="php">$resid-&gt;lpush(<span class="string">'newgoods'</span>,<span class="string">'htc'</span>);</span></span><br><span class="line"><span class="php">$redis-&gt;lpush(<span class="string">'newgoods'</span>,<span class="string">'xiaomi'</span>);</span></span><br><span class="line"><span class="php">$redis-&gt;mset(<span class="keyword">array</span>(<span class="string">'animal1'</span>=&gt;<span class="string">'dog'</span>,<span class="string">'animal2'</span>=&gt;<span class="string">'cat'</span>,<span class="string">'animal3'</span>=&gt;<span class="string">'pig'</span>));</span></span><br></pre></td></tr></table></figure></p>
</the>
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/hexo_blog/tags/Redis/" rel="tag"># Redis</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/hexo_blog/2016/11/20/2016/2016-11-21-laravel-1/" rel="next" title="Laravel框架基础-1">
                <i class="fa fa-chevron-left"></i> Laravel框架基础-1
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/hexo_blog/2016/12/26/2016/2016-12-27-ajax-1/" rel="prev" title="Ajax应用-1">
                Ajax应用-1 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/hexo_blog/images/avatar.gif"
                alt="Wang Xiong" />
            
              <p class="site-author-name" itemprop="name">Wang Xiong</p>
              <p class="site-description motion-element" itemprop="description">精于心，简于形</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/hexo_blog/archives/">
              
                  <span class="site-state-item-count">42</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">15</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#关于Redis"><span class="nav-number">1.</span> <span class="nav-text">关于Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#为什么要使用Redis"><span class="nav-number">2.</span> <span class="nav-text">为什么要使用Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#什么是Redis"><span class="nav-number">3.</span> <span class="nav-text">什么是Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#同类型产品Memcache"><span class="nav-number">4.</span> <span class="nav-text">同类型产品Memcache</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#什么场合使用Redis"><span class="nav-number">5.</span> <span class="nav-text">什么场合使用Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编译和安装Redis"><span class="nav-number">6.</span> <span class="nav-text">编译和安装Redis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#src目录下相关文件"><span class="nav-number">7.</span> <span class="nav-text">src目录下相关文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编译安装PHPRedis"><span class="nav-number">8.</span> <span class="nav-text">编译安装PHPRedis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#keys键的操作"><span class="nav-number">9.</span> <span class="nav-text">keys键的操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#string类型操作"><span class="nav-number">10.</span> <span class="nav-text">string类型操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#list数据类型"><span class="nav-number">11.</span> <span class="nav-text">list数据类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sort-set排序数据类型"><span class="nav-number">12.</span> <span class="nav-text">sort set排序数据类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hash数据类型"><span class="nav-number">13.</span> <span class="nav-text">hash数据类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redis持久化"><span class="nav-number">14.</span> <span class="nav-text">redis持久化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#redis的主从配置"><span class="nav-number">15.</span> <span class="nav-text">redis的主从配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#php操作redis"><span class="nav-number">16.</span> <span class="nav-text">php操作redis</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang Xiong</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/hexo_blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/hexo_blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/hexo_blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexo_blog/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/hexo_blog/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/hexo_blog/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/hexo_blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/hexo_blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/hexo_blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
